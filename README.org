#+OPTIONS: toc:nil
* Generisk json+http mock
** Datastruktur
   #+begin_src javascript 
     {
       "path": "/some/path", // required
       "method": "GET",      // en av: GET/POST/PUT
       "requestBody": {},    // request object,  - optional
       "responseBody": {},   // response object, - optional
       "status": 200         // default 200      - optional
     }
   #+end_src
   
** Mock et GET-request
   Ved å sende poste testdata:
   #+begin_src http :pretty
     POST http://localhost:8081/testdata
     Content-Type: application/json

     {
       "path": "/bostotte/0000000",
       "method": "GET",
       "responseBody": {
         "status": true
       }
     }

   #+end_src

   
   oppfører endepunktet seg som definert:
   #+begin_src http :pretty
     GET http://localhost:8081/bostotte/0000000
   #+end_src

** Mock Statuskode
   Dersom man først definerer et request som skal feile:
   #+begin_src http
     POST http://localhost:8081/testdata
     Content-Type: application/json

     {
       "path": "/fail",
       "method": "GET",
       "status": 500,
       "responseBody": {
         "error": "jeg feilet, og sier i fra med json"
       }
     }
   #+end_src

   Vil det feile:
   #+begin_src http
     GET http://localhost:8081/fail
   #+end_src

** Mock et POST-request
   
   #+begin_src http :pretty
   POST http://localhost:8081/testdata
   Content-Type: application/json

   {
     "path": "/postbar",
     "method": "POST",
     "requestBody": {
       "alfa": "alfa"
     },
     "responseBody": {
       "hello": "alfa"
     }
   }
   #+end_src

   
   =requestBody= feltet er spesielt, feltet blir en nøkkel som man gjør
   oppslag på. 
   
   #+begin_src http :pretty
     POST http://localhost:8081/postbar
     Content-Type: application/json

     {"alfa": "alfa"}
   #+end_src

** Mock et PUT-request
   #+begin_src http :pretty
   POST http://localhost:8081/testdata
   Content-Type: application/json

   {
     "path": "/postbar",
     "method": "PUT",
     "requestBody": {
       "beta": "beta"
     },
     "responseBody": {
       "hello": "beta"
     }
   }
   #+end_src

   
   =PUT= fungerer på samme måte som =POST=
   
   #+begin_src http :pretty
     PUT http://localhost:8081/postbar
     Content-Type: application/json

     {"beta": "beta"}
   #+end_src

** Hent alle testdata
   #+begin_src http :pretty
     GET http://localhost:8081/testdata
   #+end_src

